{"version":3,"file":"admin.js","mappings":"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","sources":["webpack://module.exports/webpack/bootstrap","webpack://module.exports/webpack/runtime/compat get default export","webpack://module.exports/webpack/runtime/define property getters","webpack://module.exports/webpack/runtime/hasOwnProperty shorthand","webpack://module.exports/external root \"flarum.core.compat['app']\"","webpack://module.exports/./src/config.js","webpack://module.exports/external root \"flarum.core.compat['components/LogInModal']\"","webpack://module.exports/external root \"flarum.core.compat['components/SignUpModal']\"","webpack://module.exports/external root \"flarum.core.compat['components/ChangeEmailModal']\"","webpack://module.exports/external root \"flarum.core.compat['components/ChangePasswordModal']\"","webpack://module.exports/./src/shared/util.js","webpack://module.exports/./src/shared/intercept.js","webpack://module.exports/./src/admin/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['app'];","export const ID = 'alexanderomara-wp-users';\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/LogInModal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/SignUpModal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/ChangeEmailModal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/ChangePasswordModal'];","import app from 'flarum/app';\n\nimport {ID} from '../config';\n\nexport function data() {\n\treturn app.data[ID];\n}\n\nexport function queryAdd(url, key, value) {\n\tconst parts = url.split('#');\n\tconst c = parts[0].indexOf('?') < 0 ? '?' : '&';\n\tparts[0] += `${c}${encodeURIComponent(key)}=${encodeURIComponent(value)}`;\n\treturn parts.join('#');\n}\n\nfunction findProperty(object, property) {\n\tif (Object.getOwnPropertyDescriptor(object, property)) {\n\t\treturn object;\n\t}\n\tfor (\n\t\tlet constructor = Object.getPrototypeOf(object)?.constructor;\n\t\tconstructor;\n\t\tconstructor = Object.getPrototypeOf(constructor)\n\t) {\n\t\tconst {prototype} = constructor;\n\t\tif (!prototype) {\n\t\t\tbreak;\n\t\t}\n\t\tif (Object.getOwnPropertyDescriptor(prototype, property)) {\n\t\t\treturn prototype;\n\t\t}\n\t}\n\treturn null;\n}\n\nexport function methodOverride(object, method, replacement) {\n\tconst o = findProperty(object, method);\n\tif (!o) {\n\t\tthrow new Error(`Property not found: ${method}`);\n\t}\n\tconst desc = Object.getOwnPropertyDescriptor(o, method);\n\tconst {value} = desc;\n\tif (typeof value !== 'function') {\n\t\tthrow new Error(`Property not function: ${method}`);\n\t}\n\tdesc.value = replacement(value);\n\tObject.defineProperty(object, method, desc);\n}\n","import app from 'flarum/app';\nimport LogInModal from 'flarum/components/LogInModal';\nimport SignUpModal from 'flarum/components/SignUpModal';\nimport ChangeEmailModal from 'flarum/components/ChangeEmailModal';\nimport ChangePasswordModal from 'flarum/components/ChangePasswordModal';\n\nimport {data, queryAdd, methodOverride} from './util';\n\nfunction redirectThrough(url) {\n\treturn url ? queryAdd(url, 'redirect_to', location.href) : url;\n}\n\nfunction bypass() {\n\t// Add #localuser to URL to bypass the hijacking.\n\treturn /#localuser$/i.test(location.href);\n}\n\nfunction shouldRedirect(componentClass) {\n\tswitch (componentClass) {\n\t\tcase LogInModal: {\n\t\t\treturn redirectThrough(data().loginUrl);\n\t\t}\n\t\tcase SignUpModal: {\n\t\t\treturn redirectThrough(data().registerUrl);\n\t\t}\n\t\tcase ChangeEmailModal: {\n\t\t\treturn data().allowedChanges?.email ?\n\t\t\t\tnull :\n\t\t\t\tdata().profileUrl;\n\t\t}\n\t\tcase ChangePasswordModal: {\n\t\t\treturn data().allowedChanges?.password ?\n\t\t\t\tnull :\n\t\t\t\tdata().profileUrl;\n\t\t}\n\t}\n\treturn null;\n}\n\nexport function intercept() {\n\t// Hijack the method that shows the different modals to redirect.\n\tmethodOverride(app.modal, 'show', show => {\n\t\treturn function(componentClass, _attrs) {\n\t\t\tconst redirect = bypass() ? null : shouldRedirect(componentClass);\n\t\t\tif (redirect) {\n\t\t\t\tlocation.href = redirect;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\treturn show.apply(this, arguments);\n\t\t};\n\t});\n}\n","import app from 'flarum/app';\n\nimport {ID} from '../config';\nimport {intercept} from '../shared/intercept';\n\napp.initializers.add(ID, app => {\n\tintercept();\n\n\tconst ext = app.extensionData.for(ID);\n\tconst code = (key, name, info) => {\n\t\text.registerSetting(function() {\n\t\t\treturn (\n\t\t\t\t<div className=\"Form-group\">\n\t\t\t\t\t<label>{name} (<code>{info}</code>)</label>\n\t\t\t\t\t<code>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\t\tclassName='FormControl'\n\t\t\t\t\t\t\tstyle={{maxWidth: 'none'}}\n\t\t\t\t\t\t\tbidi={this.setting(`${ID}.${key}`)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</code>\n\t\t\t\t</div>\n\t\t\t);\n\t\t});\n\t};\n\n\tcode('login_url', 'Login URL', '.../wp-login.php');\n\tcode('profile_url', 'Profile URL', '.../wp-admin/profile.php');\n\tcode('cookie_name', 'Cookie Name', 'wordpress_logged_in_...');\n\tcode('db_host', 'Database Host', 'DB_HOST');\n\tcode('db_user', 'Database User', 'DB_USER');\n\tcode('db_pass', 'Database Password', 'DB_PASSWORD');\n\tcode('db_name', 'Database Name', 'DB_NAME');\n\tcode('db_charset', 'Database Charset', 'DB_CHARSET');\n\tcode('db_pre', 'Database Prefix', '$table_prefix');\n\tcode('logged_in_key', 'Logged In Key', 'LOGGED_IN_KEY');\n\tcode('logged_in_salt', 'Logged In Salt', 'LOGGED_IN_SALT');\n\tcode('nonce_key', 'Nonce Key', 'NONCE_KEY');\n\tcode('nonce_salt', 'Nonce Salt', 'NONCE_SALT');\n});\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","flarum","core","compat","ID","data","app","redirectThrough","url","value","parts","split","c","indexOf","encodeURIComponent","join","queryAdd","location","href","intercept","object","method","replacement","property","getOwnPropertyDescriptor","constructor","_Object$getPrototypeO","getPrototypeOf","findProperty","Error","desc","methodOverride","show","componentClass","_attrs","redirect","test","LogInModal","loginUrl","SignUpModal","registerUrl","ChangeEmailModal","_data$allowedChanges","allowedChanges","email","profileUrl","ChangePasswordModal","_data$allowedChanges2","password","shouldRedirect","apply","this","arguments","add","ext","extensionData","code","name","info","registerSetting","m","className","type","style","maxWidth","bidi","setting"],"sourceRoot":""}